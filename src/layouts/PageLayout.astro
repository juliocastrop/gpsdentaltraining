---
/**
 * PageLayout - Unified layout for all internal pages
 *
 * This layout provides consistent structure for pages like:
 * - About, Monthly Seminars, Speakers, Calendar, Contact, etc.
 *
 * Features:
 * - Transparent navbar with scroll effect
 * - Hero section with customizable background (image or gradient)
 * - Breadcrumb navigation
 * - Wave divider transition
 * - Footer
 *
 * Usage:
 * <PageLayout
 *   title="About Us"
 *   description="Learn about GPS Dental Training"
 *   breadcrumbs={[{ label: 'About Us' }]}
 *   heroTitle="Georgia Prosthodontics"
 *   heroTitleAccent="Study Club & Training Center"
 *   heroDescription="Advanced Education in Implant, Restorative and Digital Dentistry"
 *   heroBadge={{ icon: 'building', text: 'Duluth, Georgia' }}
 *   heroImage="/images/facility.jpg"
 *   heroStats={[{ value: '15+', label: 'Years' }]}
 * >
 *   <main content here>
 * </PageLayout>
 */
import '../styles/global.css';
import Navbar from '../components/layout/Navbar';
import Footer from '../components/layout/Footer';

interface Breadcrumb {
  label: string;
  href?: string;
}

interface HeroBadge {
  icon?: 'building' | 'calendar' | 'users' | 'certificate' | 'phone' | 'star';
  text: string;
}

interface HeroStat {
  value: string;
  label: string;
  accent?: boolean;
}

interface Props {
  // SEO
  title: string;
  description?: string;
  ogImage?: string;

  // Breadcrumbs
  breadcrumbs?: Breadcrumb[];

  // Hero Section
  showHero?: boolean; // Set to false to hide the default hero (e.g., for homepage with custom slider)
  heroTitle?: string;
  heroTitleAccent?: string;
  heroDescription?: string;
  heroBadge?: HeroBadge;
  heroImage?: string; // If provided, uses image background; otherwise uses gradient
  heroStats?: HeroStat[];
  heroActions?: boolean; // Show default CTA buttons

  // Layout options
  heroHeight?: 'short' | 'medium' | 'tall';
  waveColor?: string; // Color of the wave divider (default: white)
  transparentNavbar?: boolean; // Whether navbar should be transparent (default: true for hero pages)
}

const {
  title,
  description = "GPS Dental Training - Advanced Education in Implant, Restorative and Digital Dentistry",
  ogImage = "/og-default.jpg",
  breadcrumbs = [],
  showHero = true,
  heroTitle = '',
  heroTitleAccent,
  heroDescription,
  heroBadge,
  heroImage,
  heroStats = [],
  heroActions = false,
  heroHeight = 'medium',
  waveColor = 'white',
  transparentNavbar,
} = Astro.props;

// Determine if navbar should be transparent
const isNavbarTransparent = transparentNavbar !== undefined ? transparentNavbar : showHero;

// Hero height classes
const heroHeightClasses = {
  short: 'min-h-[40vh]',
  medium: 'min-h-[50vh] lg:min-h-[60vh]',
  tall: 'min-h-[60vh] lg:min-h-[70vh]',
};

// Badge icons
const badgeIcons = {
  building: `<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4" />`,
  calendar: `<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z" />`,
  users: `<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z" />`,
  certificate: `<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4M7.835 4.697a3.42 3.42 0 001.946-.806 3.42 3.42 0 014.438 0 3.42 3.42 0 001.946.806 3.42 3.42 0 013.138 3.138 3.42 3.42 0 00.806 1.946 3.42 3.42 0 010 4.438 3.42 3.42 0 00-.806 1.946 3.42 3.42 0 01-3.138 3.138 3.42 3.42 0 00-1.946.806 3.42 3.42 0 01-4.438 0 3.42 3.42 0 00-1.946-.806 3.42 3.42 0 01-3.138-3.138 3.42 3.42 0 00-.806-1.946 3.42 3.42 0 010-4.438 3.42 3.42 0 00.806-1.946 3.42 3.42 0 013.138-3.138z" />`,
  phone: `<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z" />`,
  star: `<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11.049 2.927c.3-.921 1.603-.921 1.902 0l1.519 4.674a1 1 0 00.95.69h4.915c.969 0 1.371 1.24.588 1.81l-3.976 2.888a1 1 0 00-.363 1.118l1.518 4.674c.3.922-.755 1.688-1.538 1.118l-3.976-2.888a1 1 0 00-1.176 0l-3.976 2.888c-.783.57-1.838-.197-1.538-1.118l1.518-4.674a1 1 0 00-.363-1.118l-3.976-2.888c-.784-.57-.38-1.81.588-1.81h4.914a1 1 0 00.951-.69l1.519-4.674z" />`,
};

const waveFillColor = waveColor === 'white' ? 'white' : waveColor === 'gray' ? '#F8F9FA' : waveColor;
---

<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content={description} />

    <link rel="icon" type="image/svg+xml" href="/favicon.svg" />

    <!-- Open Graph -->
    <meta property="og:type" content="website" />
    <meta property="og:url" content={Astro.url.href} />
    <meta property="og:title" content={`${title} | GPS Dental Training`} />
    <meta property="og:description" content={description} />
    <meta property="og:image" content={ogImage} />

    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;500;600;700;800&family=Open+Sans:wght@400;500;600&display=swap" rel="stylesheet" />

    <title>{title} | GPS Dental Training</title>
  </head>

  <body class="min-h-screen flex flex-col bg-white">
    <!-- Navigation -->
    <Navbar
      logo="/logo.svg"
      logoWhite="/logo-white.svg"
      transparent={isNavbarTransparent}
      client:load
    />

    <!-- Hero Section (conditionally rendered) -->
    {showHero && (
      <section class={`relative ${heroHeightClasses[heroHeight]} flex items-center overflow-hidden`}>
        <!-- Background -->
        {heroImage ? (
          <div class="absolute inset-0">
            <img
              src={heroImage}
              alt=""
              class="w-full h-full object-cover"
            />
            <div class="absolute inset-0 bg-gradient-to-r from-[#0C2044]/95 via-[#13326A]/85 to-[#173D84]/70"></div>
          </div>
        ) : (
          <div class="absolute inset-0 bg-gradient-to-br from-[#0C2044] via-[#173D84] to-[#0C2044]"></div>
        )}

        <!-- Decorative Elements -->
        <div class="absolute inset-0 opacity-10">
          <div class="absolute top-20 left-10 w-72 h-72 bg-[#DDC89D] rounded-full blur-3xl"></div>
          <div class="absolute bottom-20 right-10 w-96 h-96 bg-[#26ACF5] rounded-full blur-3xl"></div>
          <div class="absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-[800px] h-[800px] bg-white/5 rounded-full"></div>
        </div>

        <!-- Grid Pattern -->
        <div class="absolute inset-0 opacity-5">
          <div class="absolute inset-0" style="background-image: radial-gradient(circle at 1px 1px, white 1px, transparent 0); background-size: 40px 40px;"></div>
        </div>

        <div class="container mx-auto px-4 lg:px-8 max-w-7xl relative z-10 py-24 lg:py-32">
          <div class="max-w-3xl">
            <!-- Breadcrumb -->
            {breadcrumbs.length > 0 && (
              <nav class="flex items-center gap-2 text-white/60 text-sm mb-6">
                <a href="/" class="hover:text-white transition-colors">Home</a>
                {breadcrumbs.map((crumb, index) => (
                  <>
                    <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"/>
                    </svg>
                    {crumb.href ? (
                      <a href={crumb.href} class="hover:text-white transition-colors">{crumb.label}</a>
                    ) : (
                      <span class="text-white">{crumb.label}</span>
                    )}
                  </>
                ))}
              </nav>
            )}

            <!-- Badge -->
            {heroBadge && (
              <div class="inline-flex items-center gap-2 bg-white/10 backdrop-blur-sm border border-white/20 text-white px-4 py-2 rounded-full text-sm mb-6">
                {heroBadge.icon && (
                  <svg class="w-5 h-5 text-[#DDC89D]" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <Fragment set:html={badgeIcons[heroBadge.icon]} />
                  </svg>
                )}
                {heroBadge.text}
              </div>
            )}

            <!-- Title -->
            <h1 class="text-4xl md:text-5xl lg:text-6xl font-extrabold text-white mb-6 leading-tight font-heading">
              {heroTitle}
              {heroTitleAccent && (
                <>
                  <br class="hidden md:block" />
                  <span class="text-[#DDC89D]">{heroTitleAccent}</span>
                </>
              )}
            </h1>

            <!-- Description -->
            {heroDescription && (
              <p class="text-xl text-white/80 mb-8 max-w-2xl leading-relaxed">
                {heroDescription}
              </p>
            )}

            <!-- Stats -->
            {heroStats.length > 0 && (
              <div class="flex flex-wrap gap-6 lg:gap-10">
                {heroStats.map((stat) => (
                  <div class="text-center">
                    <p class={`text-3xl lg:text-4xl font-bold ${stat.accent ? 'text-[#DDC89D]' : 'text-white'}`}>{stat.value}</p>
                    <p class="text-sm text-white/60 uppercase tracking-wide">{stat.label}</p>
                  </div>
                ))}
              </div>
            )}

            <!-- Hero Actions (optional) -->
            {heroActions && (
              <div class="flex flex-wrap gap-4 mt-8">
                <a
                  href="/courses"
                  class="inline-flex items-center justify-center gap-2 bg-[#0B52AC] text-white px-8 py-4 rounded-lg font-bold text-lg hover:bg-[#13326A] transition-all shadow-lg hover:shadow-xl"
                >
                  View Courses
                  <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 8l4 4m0 0l-4 4m4-4H3" />
                  </svg>
                </a>
                <a
                  href="/contact"
                  class="inline-flex items-center justify-center gap-2 bg-white/10 backdrop-blur-sm text-white px-8 py-4 rounded-lg font-bold text-lg hover:bg-white/20 transition-all border border-white/20"
                >
                  Contact Us
                </a>
              </div>
            )}
          </div>
        </div>

        <!-- Wave Divider -->
        <div class="absolute bottom-0 left-0 right-0">
          <svg viewBox="0 0 1440 100" fill="none" xmlns="http://www.w3.org/2000/svg" class="w-full h-auto">
            <path d="M0 50L48 45.7C96 41 192 33 288 35.3C384 37 480 49 576 55.3C672 62 768 62 864 55.3C960 49 1056 35 1152 30.8C1248 27 1344 33 1392 36.2L1440 39V100H1392C1344 100 1248 100 1152 100C1056 100 960 100 864 100C768 100 672 100 576 100C480 100 384 100 288 100C192 100 96 100 48 100H0V50Z" fill={waveFillColor}/>
          </svg>
        </div>
      </section>
    )}

    <!-- Main Content -->
    <main class="flex-1">
      <slot />
    </main>

    <!-- Footer -->
    <Footer />
  </body>
</html>
